面試職缺：DBA
面試人員：William

## 2021/11/1 一面 - DBA teammate

首先要求自我介紹<br>
後續基本上都是針對履歷問問題<br>
過程相對順利，題目不難，也沒有問到太多深入的底層。比較偏向廣泛的全面知識問答，只要各方面都有基礎就很容易回答。

1. 你們 mysql 有多少節點，架構是什麼，HA、LB、備份還原怎麼做
2. 是否使用過 RDS 或 DBsaas
3. cpu loading 很高的情況下怎麼解決?
4. 如果 RD 來一個 sql 或 schema，請問你怎麼審核並給予建議
5. 為什麼建議使用 auto_increment
6. sql deploy 的時候，都怎麼處理?遇到大表加字段的時候，如果後面鏈路還有接上 tidb 時，又怎麼處理?以及 tidb 在處理加字段的行為是什麼?
7. 說說 mongodb sharding cluster 和 replica 分別以及你們的架構
8. mongodb sharding cluster routing 的 component 叫什麼名字
9. mongodb sharding cluster 中儲存 metadata 的 component 叫什麼名字
10. mongodb sharding cluster 怎麼做分片，會遇到哪些問題
11. mongodb 架構上，你覺得何時採用 replica 而何時該採用 cluster
12. mongodb replica 為何不建議使用偶數
13. 說說 mysql 和 mongodb 之間的差別，在一開始的技術選型中，如何根據 RD 的 use case 去協助他們選擇
14. 解釋一下 ES 的 Inverted Index
15. 說說 mongodb 和 es 的差異點，如果同樣都存 log，那怎麼選擇這兩種技術選型
16. 你們 tidb 主要用來做那些應用，tidb 相關組件有哪些，各自作用是什麼，而你們實際上使用幾個集群和節點?
17. mysql 和 tidb 中數據同步用什麼方式?若使用的是 dm ，那使用過程中有遇過哪些問題
18. 你的英文好嗎?


## 2021/11/5 二面 - DBA teammate
首先要求自我介紹<br>
問題不多，大多數針對 mysql 詢問，基本上是從單一問題的大方向再逐步問到細部底層原理<br>
會需要真的有經驗以及理解資料庫設計特性的底層概念，只懂皮毛的話可能這關會被刷掉<br>
簡單來說，相較一面，這關過得比較辛苦一點

1. 解釋一下雙一參數的原理和用途
2. 解釋一下 mysql 兩階段提交的原理，以及瓶頸
3. 解釋一下並行複製的用途和原理
4. 解釋一下半同步與增強半同步的差異和用途
5. 是否使用過分區表的方案，以及如果今天要做分區表，該怎麼和 RD 協商溝通，要注意哪些點?
6. 是否使用過分庫分表的方案，什麼情況下要分庫分表，要注意哪些?以及後續用什麼方式聚合做查詢?
6. 遇到大表加字段的時候怎麼處理? pt-osc 和 gh-ost 如何選擇? 使用 pt-osc 有遇過 deadlock 的情況嗎? 有的話請說明一下 deadlock 原因
7. cpu loading 很高的情況下怎麼解決? 著重在思路，以及是否用過 innotop
8. 詢問現職的 mongodb 架構，以及舉例有使用過哪些生態工具，ex 備份、運維等
9. mongodb 的 slowlog 怎麼收集和處理?
10. 近期有處理過哪些故障處理
11. clickhouse 的集群方案有哪些? (但我回答我只用過 singlenode，他就 pass 了 哈哈)
12. 你的英文好嗎?

## 2021/11/12 三面 - DBA Leader
沒有再要求自我介紹，直接切入技術，基本上全聚焦在 mysql<br>
問的問題不多，但要求細節蠻深入的，有些我回答不出來，但只要方向對細節忘記他也不會太刁難你(不過建議還是全部回答出來比較好)

1. Mysql crash 後的恢復過程是怎麼樣的，請解釋
   這邊也會牽扯到兩階段提交的整個流程，並解釋兩個相關參數的意義以及在過程中扮演的角色和刷盤的原理
2. 解釋 mysql replication 的演進史(傳統 replication 的設計與瓶頸、半同步、增強半同步、並行複製 5.6 與 5.7 與 8.0 分別各有那些特點和原理)
3. 近期有處理過哪些故障處理，請說明情境、處理方式
4. 你有沒有遇過 sql 沒中 index 或沒選到預期 index 的情況?請說說具體情境和原理
5. 是否會寫 python(Django)
6. 你為什麼會想來幣安
7. 你的英文好嗎?

接著主管讓我提問
1. 您如何看待加密貨幣這個產業?在未來五年會發生怎麼樣的變化?
2. 我們知道畢安是目前世界第一的加密貨幣交易所，但現在中國打壓的情況下，未來短中長期計畫有哪些?使其持續在市場保持領先地位？
3. 對於新夥伴和整個 DBA team 的期望?   
4. 以及組織未來的方向?
5. 您會如何形容公司的文化和團隊的工作氛圍?

## 2021/11/15 四面 - HR Michelle
說是四面，但其實 HR 也只問了我三個問題後就開始談薪水
1. 對於 remote 的工作，如果遇到工作上的問題，你覺得該如何解決
2. 你覺得加入後，能為團隊做出什麼貢獻
3. (忘記了...)

接著開始談薪資，基本上幣安是效仿普通外商的薪資結構，即 12薪 + bonus。<br>
特別的是 HR 強調幣安的 bonus 是「一定」會給的，按照 KPI 得分來算基數。<br>
1 ~ 6分，1分最好，6分最差。一般表現普通的員工均落在4，同時4也是及格分。<br>
1分的員工，bonus 落在 8 ~ 9個月左右<br>
4分的員工，bonus 落在 2 ~ 3個月左右<br>
低於4分，離被火也不遠了，就不討論。基本上我相信大家都對自己有些信心不低於四分。<br>
所以在談年薪的時候，HR 會把 bonus 也放進去算，因為對他們來說，bonus 是不成文規定一定領的到的(這部分求證已在內部的朋友確實如此)。<br>
因此 HR 針對我在台灣的情況，是用 14薪來算年薪。<br>
也就是說我提出我的期望年薪 X 萬，那月薪就是 X/14，用這個基礎來去做核薪申請。<br>
另外 bonus 一律都以 BNB 發放，固定薪資可以自行選擇 % 兌換 BNB。也就是說你可以全額法幣、全額 BNB、任意 %數的法幣與 BNB 混和。<br>

在一開始談的時候我開的薪資有點過高，HR 並沒有壓我，而是比較客觀的和我分析成功率以及備用方案。<br>
第一次送的時候果不其然被 HR 主管打槍 XD，所以就依照一開始談好的備用方案再度送件。<br>
而我的情況也很特殊，我是在 11月面試的，距離明年應該要領到的 bonus 只剩不到兩個月。<br>
HR 自己「主動」幫我申請 signon bonus，直接 cover 掉我所有的 bonus，真的蠻有心的。<br>
可以感覺到對方也是站在求職者的立場上盡力去幫忙爭取，我第一次遇到不壓薪資又主動幫我爭取 signon bonus 的 HR，很感謝。<br>

最後在談總薪資的時候分享個小 tip。<br>
可以把現職的基本薪資+保障年終+各式名目的獎金通通加起來，視為現職的總年資，然後再以這個數字為底去爭取 offer。<br>
像我在天堂2021的年薪約200萬，但那是由基本月薪+固定年終+績效獎金+人才加給等所有名目加起來才有，所以實際上月薪不高。<br>
但他們不 care，反正就以真正領到的那個總額再去談，他不希望求職者吃虧。<br>
(阿記得不要說謊，後面會要求你提供明細，如果亂報就GG囉)

## 其他福利或特點
* 特休10天，每年加一天，最多不超過 15天。
* 病假12天，請一天的話不用單據，兩天以上才要單據。
* 每月補助膳食交通共 2150元
* 內部語言訓練課程
* 工作型態全 remote
* mysql 節點據說是3、4千個，其他還有 mongodb、redis、tidb、clickhouse 等各種資料庫。全部都是 DBSaas。流量規模很大，絕對適合磨練。
* oncall 一周會有兩位，所以如果滿編10人，相當於5周才會輪到一次。而且有 partner 的情況下，壓力相對小一點點，這點我覺得還 ok。

## 整體心得
每一關面試都是視訊面試，但面試官都不會開鏡頭，面試者可開可不開XD<br>
時間都是一小時，不會多也不會少，都是大陸人面試，所以中文即可，難度越後面增加越多。<br>
不要看那些題目好像都很簡單，但因為越後面問得越細，不是簡單的講個結論或是大概就能乎巄過去的，所以建議各位要面試的話要好好複習 mysql 底層原理。<br>
(我就是太自負不看書所以才被洗臉，但可能剛好遇到他們急招，所以我才賽到進去的QQ)<br>
整個面試流程很快很有效率，從內推送件到一面，只隔一天。每一面結束後隔天就會告訴你結果並且約下次面試的時間。時間都順利的話像我兩個禮拜就搞定了。<br>
然後細心的人應該有發現前三面最後的問題都是詢問英文能力，跟總部要遷移到國外有關。<br>
未來會有更高比例的非中文工作者同事，所以外語能力也會需要提高，這塊可以善用幣安的內部語言課程來加強；一旦外語能力提升，未來要去其他公司也會更順利。
